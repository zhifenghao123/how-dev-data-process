# 转换算子（Transformation）
数据源读入数据之后，我们就可以使用各种转换算子，将一个或多个 DataStream 转换新的 DataStream。

Environment（执行环境） -> Source（数据源） -> Transformation（转换算子） -> Sink（输出）

## 基本转换算子（map/ filter/ flatMap）
### 映射（map）
### 过滤（filter）
### 扁平映射（flatMap）

map和flatMap的区别：map是将一个元素映射成一个元素，而flatMap可以将一个元素映射成一个或多个元素。

## 聚合算子（Aggregation）

计算的结果不仅依赖当前数据，还跟之前的数据有关，相当于要把所有数据聚在一起进行汇总合并—一这就是所谓的“聚合”（Aggregation），类似于 MapReduce 中的 reduce操作。

### 按键分区（keyBy）
对于 Flink 而言，DataStream 是没有直接进行聚合的API 的。因为我们对海量数据做聚合肯定要进行分区并行处理，这样才能提高效率。
所以在 Flink中，要做聚合，需要先进行分区；这个操作就是通过keyBy来完成的。

keyBy 是聚合前必须要用到的一个算子。keyBy 通过指定键（key），可以将一条流从逻辑上划分成不同的分区（partitions）。这里所说的分区，其实就是并行处理的子任务。
基于不同的key，流中的数据将被分配到不同的分区中去；这样一来，所有具有相同的key 的数据，都将被发往同一个分区。

### 简单聚合（sum/min/max/minBy/maxBy）
有了按键分区的数据流 KeyedStream，我们就可以基于它进行聚合操作了。Flink 为我们内置实现了一些最基本、最简单的聚合API，主要有以下几种：

sum()：在输入流上，对指定的字段做叠加求和的操作。

min()：在输入流上，对指定的字段求最小值。

max()：在输入流上，对指定的字段求最大值。

minBy()：与 min()类似，在输入流上针对指定字段求最小值。不同的是，min()只计算指定字段的最小值，其他字段会保留最初第一个数据的值；而 minBy()则会返回包含字段最小值的整条数据。

maxBy()：与 max()类似，在输入流上针对指定字段求最大值。不同的是，max()只计算指定字段的最大值，其他字段会保留最初第一个数据的值；而 maxBy()则会返回包含字段最大值的整条数据。



